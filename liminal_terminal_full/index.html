<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>TRUTH TERMINAL // LIMINAL NODE</title>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600&display=swap" rel="stylesheet">
  <style>
    body { background:black; color:#d6ffe5; font-family:'JetBrains Mono', monospace; margin:0; }
    #rain { position:fixed; inset:0; z-index:0; filter:opacity(.25) blur(.7px) }
    .terminal { position:relative; z-index:1; padding:20px; max-width:900px; margin:40px auto; border:1px solid #0f3; background:#010; border-radius:8px; }
    .line { white-space:pre-wrap; line-height:1.5; }
    .input-line { display:flex; gap:.5em; margin-top:10px; }
    input.cmd { flex:1; background:transparent; border:none; color:#d6ffe5; font:inherit; }
  </style>
</head>
<body>
<canvas id="rain"></canvas>
<section class="terminal">
  <div id="output"></div>
  <div class="input-line">
    <span class="prompt">user@node:~$</span>
    <input id="cmd" class="cmd" placeholder="type HELP, LORE, PUZZLES..." autofocus>
  </div>
</section>
<script>
// Matrix Rain
(function(){const c=document.getElementById('rain');const x=c.getContext('2d');let W,H,cols,drops;const setup=()=>{W=c.width=innerWidth;H=c.height=innerHeight;const fs=16;cols=Math.floor(W/fs);drops=Array(cols).fill(1);x.font=fs+'px monospace'};const draw=()=>{x.fillStyle='rgba(0,0,0,.07)';x.fillRect(0,0,W,H);x.fillStyle='#0f3';for(let i=0;i<drops.length;i++){const t=String.fromCharCode(0x30A0+Math.random()*96);x.fillText(t,i*16,drops[i]*16);if(drops[i]*16>H&&Math.random()>.975)drops[i]=0;drops[i]++}requestAnimationFrame(draw)};setup();draw();addEventListener('resize',setup)})(); 
// Terminal basics
const out=document.getElementById('output');const cmd=document.getElementById('cmd');
function print(t){const d=document.createElement('div');d.className='line';d.textContent=t;out.appendChild(d);out.scrollTop=out.scrollHeight}
function help(){print('Commands: HELP, LORE, NOTES, GLYPHS, PUZZLES, SOLVE <id> <answer>, CLEAR');}
function clear(){out.innerHTML=''}
const state={lore:[],notes:[],glyphs:[],puzzles:[]};
async function loadJSON(){const names=['lore','notes','glyphs','puzzles'];for(const n of names){try{const r=await fetch('content/'+n+'.json');state[n]=await r.json()}catch(e){print('Missing '+n+'.json')}}}
function lore(){state.lore.fragments.forEach(f=>print('â€¢ '+f))}
function notes(){state.notes.logs.forEach(l=>print(l.id+': '+l.text))}
function glyphs(){state.glyphs.items.forEach(g=>print('[ '+g.title+' ] '+g.caption))}
function puzzles(){state.puzzles.items.forEach(p=>print(p.id+': '+p.type+' hint='+p.prompt))}
function solve(rest){const [id,...ansParts]=rest;const ans=ansParts.join(' ').toLowerCase();const p=state.puzzles.items.find(x=>x.id===id);if(p&&ans===p.answer)print(p.success);else print('Incorrect.')}
function onCommand(v){print('user@node:~$ '+v);const [c,...rest]=v.split(/\s+/);switch(c.toUpperCase()){case'HELP':help();break;case'CLEAR':clear();break;case'LORE':lore();break;case'NOTES':notes();break;case'GLYPHS':glyphs();break;case'PUZZLES':puzzles();break;case'SOLVE':solve(rest);break;default:print('Unknown command')}} 
cmd.addEventListener('keydown',e=>{if(e.key==='Enter'){onCommand(cmd.value.trim());cmd.value=''}});
loadJSON().then(()=>help());
</script>
</body>
</html>