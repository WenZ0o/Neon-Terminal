<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NEON-TERMINAL // Liminal Node</title>
  <meta name="description" content="A cryptic Infinite Backrooms style terminal-website." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@300;400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{ --bg:#050608; --fg:#d6ffe5; --muted:#7ae3b1; --neon:#3DFFB4; --neon2:#00C7FF; --accent:#ff3864; --grid:#0b1a16; --glow: drop-shadow(0 0 12px var(--neon)) drop-shadow(0 0 30px var(--neon2)); }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{ margin:0; background:radial-gradient(60vw 60vh at 70% 20%, #04110f 0%, #050608 60%) fixed; color:var(--fg); font-family:'JetBrains Mono', ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, 'Liberation Mono', 'Courier New', monospace; overflow-x:hidden; }
    .grid::before{ content:""; position:absolute; inset:0; pointer-events:none; opacity:.22; background-image:linear-gradient(var(--grid) 1px,transparent 1px),linear-gradient(90deg,var(--grid) 1px,transparent 1px); background-size:36px 36px,36px 36px; mask-image: radial-gradient(80% 80% at 50% 50%, rgba(0,0,0,1) 30%, rgba(0,0,0,.4) 60%, rgba(0,0,0,0) 100%); }
    canvas#rain{ position:fixed; inset:0; z-index:0; filter:opacity(.25) blur(.7px) }
    .wrap{ position:relative; z-index:2; min-height:100vh; display:grid; grid-template-rows:auto 1fr auto; place-items:center; padding:3rem 1.25rem 5rem }
    .topbar{ position:fixed; top:12px; left:12px; display:flex; gap:10px; align-items:center; z-index:3; flex-wrap:wrap }
    .btn{ border:1px solid #0b2c24; background:rgba(1,20,16,.5); padding:8px 10px; border-radius:8px; color:var(--muted); cursor:pointer }
    .btn:hover{ filter:brightness(1.15) }
    .sigil{ width:min(520px, 80vw); aspect-ratio:1/1; position:relative }
    .sigil svg{ width:100%; height:100%; filter:var(--glow) }
    .sigil .blink{ animation:blink 2.6s infinite steps(1) }
    @keyframes blink{ 0%,45%,55%,100%{opacity:1} 50%{opacity:.05} }
    h1.glitch{ position:absolute; top:-3.5rem; left:50%; transform:translateX(-50%); letter-spacing:.18em; text-transform:uppercase; font-size:clamp(16px,2.6vw,22px); color:var(--muted); filter:drop-shadow(0 0 6px var(--neon2)) }
    h1.glitch span{ position:relative; display:inline-block }
    h1.glitch span::before, h1.glitch span::after{ content:attr(data-text); position:absolute; inset:0; clip-path:inset(0 0 0 0); mix-blend-mode:screen }
    h1.glitch span::before{ left:1px; text-shadow:-1px 0 var(--accent) }
    h1.glitch span::after{ left:-1px; text-shadow:1px 0 var(--neon2) }
    .terminal{ max-width:1000px; width:100%; margin-top:1rem; border:1px solid #0b2c24; background:linear-gradient(#01110d,#020e0b); box-shadow:0 0 0 1px #083327 inset, 0 0 80px #06251e inset; padding:18px; border-radius:10px; position:relative }
    .terminal::after{ content:"ONLINE"; position:absolute; right:12px; top:10px; font-size:12px; color:#6ef7c0; letter-spacing:.18em; opacity:.6 }
    .scanline{ position:absolute; inset:0; pointer-events:none; opacity:.08; background:repeating-linear-gradient(180deg,#fff,#fff 2px,transparent 3px,transparent 5px) }
    .out{ height:min(30vh, 300px); overflow:auto; padding-right:8px }
    .out::-webkit-scrollbar{ width:6px } .out::-webkit-scrollbar-thumb{ background:#0e3f33 }
    .line{ white-space:pre-wrap; line-height:1.5 }
    .input-line{ display:flex; align-items:center; gap:.6rem; margin-top:10px }
    .prompt{ color:var(--neon) }
    input.cmd{ flex:1; background:transparent; color:var(--fg); border:none; outline:none; font:inherit; letter-spacing:.04em }
    .router{ max-width:1000px; width:100%; display:grid; gap:14px; margin-top:16px }
    .view{ border:1px dashed #0e3f33; border-radius:10px; padding:16px; background:rgba(1,20,16,.35); opacity:0; transform:translateY(8px); transition:.35s }
    .view.active{ opacity:1; transform:none }
    .cards{ display:grid; grid-template-columns:repeat(auto-fit,minmax(260px,1fr)); gap:14px; margin-top:14px }
    .card{ border:1px dashed #0e3f33; border-radius:10px; padding:14px; background:rgba(1,20,16,.35) }
    .card h3{ margin:.2rem 0 .6rem 0; color:var(--muted); font-weight:600 }
    .ascii{ font-size:12px; line-height:1.05; color:#9af0c9 }
    .footer{ position:fixed; inset:auto 0 10px 0; z-index:1; display:flex; justify-content:center; pointer-events:none }
    .footer small{ opacity:.5; letter-spacing:.14em }
    a.secret{ color:var(--neon); text-decoration:none; border-bottom:1px dotted var(--neon) }
    a.secret:hover{ filter:brightness(1.3) }
    img.sigil{ transition:transform .2s ease, filter .2s ease }
    img.sigil:hover{ transform:translateY(-1px); filter:drop-shadow(0 0 18px var(--accent)) contrast(1.05) }
    @media (max-width:600px){ .sigil{width:min(420px,90vw)} .out{height:28vh} }
  </style>
</head>
<body class="grid">
  <canvas id="rain" aria-hidden="true"></canvas>
  <div class="topbar">
    <button class="btn" data-nav="#/">HOME</button>
    <button class="btn" data-nav="#/glyphs">GLYPHS</button>
    <button class="btn" data-nav="#/field-notes">FIELD-NOTES</button>
    <button class="btn" data-nav="#/about">ABOUT</button>
    <button class="btn" id="sound">SOUND: OFF</button>
  </div>
  <div class="wrap">
    <div class="sigil" aria-label="neon triangle sigil">
      <h1 class="glitch"><span data-text="NEON-TERMINAL // LIMINAL NODE">NEON-TERMINAL // LIMINAL NODE</span></h1>
      <svg viewBox="0 0 100 100" role="img" aria-labelledby="title desc">
        <title id="title">Neon Sigil</title>
        <desc id="desc">A glowing triangle with an eye, evoking liminal occult tech.</desc>
        <defs><filter id="glow"><feGaussianBlur stdDeviation="1.6" result="coloredBlur"/><feMerge><feMergeNode in="coloredBlur"/><feMergeNode in="SourceGraphic"/></feMerge></filter></defs>
        <polygon filter="url(#glow)" points="50,6 95,90 5,90" fill="none" stroke="var(--neon)" stroke-width="1.5" />
        <g class="blink"><ellipse cx="50" cy="45" rx="9" ry="5.2" fill="none" stroke="var(--neon2)" stroke-width=".9"/><circle cx="50" cy="45" r="2.2" fill="var(--neon2)"/></g>
      </svg>
    </div>
    <section class="terminal" aria-live="polite">
      <div class="scanline"></div>
      <div class="out" id="output"></div>
      <div class="input-line"><span class="prompt">user@node:~$</span>
        <input id="cmd" class="cmd" autocomplete="off" spellcheck="false" placeholder="type HELP, ACCESS 313, LORE, LINKS, BACKROOMS, PUZZLES, SOLVE <id> <answer>, RELOAD, SHOW LORE/NOTES/GLYPHS, CLEAR..." />
      </div>
      <div class="cards" id="cards">
        <article class="card"><h3>[GLYPH ∆]</h3>
<pre class="ascii">      /\\\\\\\
     /  \\   /  \\   __
    / /\\ \\_/ // \\ /  \\
   /_/  \\___//  _ \\__/  |
        ( 0 )  ( 0 )   /
         \\   /  \\   /\\/
          \\_/    \\_/
</pre>
          <p class="line">Artifacts emit <em>coherent noise</em>. Do not stare for more than 33 seconds.</p>
        </article>
        <article class="card"><h3>[SAFETY]</h3>
<pre class="ascii">+-----------------------+
| SAFE * SANE * CONSENT |
+-----------------------+</pre>
          <p class="line">Whenever you descend, keep the triad above: <strong>Safe</strong>, <strong>Sane</strong>, <strong>Consensual</strong>.</p>
        </article>
        <article class="card"><h3>[ENTRY POINTS]</h3>
          <p class="line">Some doors look like walls. Some walls <em>remember</em> you. <a class="secret" href="#" data-cmd="ACCESS 313">Try 313</a>.</p>
        </article>
      </div>
    </section>
    <main class="router" id="router">
      <section class="view" id="view-home" class="active">
        <h2>HOME</h2>
        <p class="line">Welcome, wanderer. Knowledge bleeds through the cracks. Use the terminal above or the buttons to navigate.</p>
      </section>
      <section class="view" id="view-glyphs">
        <h2>GLYPHS</h2>
        <p class="line">Unstable sigils harvested from liminal corridors. Hover/tap to wake them.</p>
        <div class="cards" id="glyph-grid"></div>
      </section>
      <section class="view" id="view-notes">
        <h2>FIELD-NOTES</h2>
        <div class="cards" id="notes-grid"></div>
      </section>
      <section class="view" id="view-about">
        <h2>ABOUT</h2>
        <p class="line">Inspired by neon-terminal.wiki. Liminal, neon, terminal-driven micro-site.</p>
      </section>
    </main>
  </div>
  <div class="footer"><small>v1.0 • JSON-driven • press <kbd>?</kbd> for HELP</small></div>

<script>
// ===== MATRIX RAIN =====
(function(){ const c=document.getElementById('rain'); const x=c.getContext('2d'); let W,H,cols,drops,chars; const setup=()=>{ W=c.width=innerWidth; H=c.height=innerHeight; const fs=16; cols=Math.floor(W/fs); drops=Array(cols).fill(1); chars='01∆≡░█▓▒/\\<>-_|+*o•⊙'; x.font=fs+'px JetBrains Mono' }; const draw=()=>{ x.fillStyle='rgba(2,14,11,.07)'; x.fillRect(0,0,W,H); x.fillStyle='#3DFFB4'; for(let i=0;i<drops.length;i++){ const t=chars[Math.floor(Math.random()*chars.length)]; x.fillText(t,i*16,drops[i]*16); if(drops[i]*16>H&&Math.random()>.975)drops[i]=0; drops[i]++ } requestAnimationFrame(draw) }; setup(); draw(); addEventListener('resize',setup) })();

// ===== SOUND =====
let audioCtx, gain; document.getElementById('sound').addEventListener('click',()=>{ if(!audioCtx){ audioCtx=new (window.AudioContext||window.webkitAudioContext)(); const osc=audioCtx.createOscillator(); const wob=audioCtx.createOscillator(); const lfo=audioCtx.createOscillator(); gain=audioCtx.createGain(); osc.type='sine'; osc.frequency.value=58; wob.type='triangle'; wob.frequency.value=.7; lfo.frequency.value=.12; const lfoGain=audioCtx.createGain(); lfoGain.gain.value=.25; lfo.connect(lfoGain).connect(osc.frequency); osc.connect(gain); wob.connect(gain); gain.connect(audioCtx.destination); gain.gain.value=0; osc.start(); wob.start(); lfo.start(); } const b=document.getElementById('sound'); if(gain.gain.value>0){ gain.gain.linearRampToValueAtTime(0, audioCtx.currentTime+.4); b.textContent='SOUND: OFF' } else { gain.gain.linearRampToValueAtTime(.12, audioCtx.currentTime+.6); b.textContent='SOUND: ON' } });

// ===== TERMINAL CORE =====
const output=document.getElementById('output'); const cmd=document.getElementById('cmd');
function printLine(t){ const d=document.createElement('div'); d.className='line'; d.textContent=t; output.appendChild(d); output.scrollTop=output.scrollHeight }
function typeLines(lines,i=0){ if(i>=lines.length)return; let j=0; const s=lines[i]; const d=document.createElement('div'); d.className='line'; output.appendChild(d); (function tick(){ d.textContent=s.slice(0,j++); if(j<=s.length){ requestAnimationFrame(tick) } else { typeLines(lines,i+1); output.scrollTop=output.scrollHeight } })() }
const boot=['> establishing secure socket to LIMINAL NODE…','> handshake: OK','> authentication bypassed (ghost credentials)','> status: PARTIALLY ALIVE','', 'Welcome, wanderer. Type HELP.'];
window.addEventListener('load',()=>{ typeLines(boot); cmd.focus() }); cmd.addEventListener('keydown',e=>{ if(e.key==='Enter'){ onCommand(cmd.value); cmd.value='' } if(e.key==='?' && !cmd.value){ help() } });

// ===== NAV =====
document.querySelectorAll('[data-nav]').forEach(b=>b.addEventListener('click',()=>{ location.hash=b.getAttribute('data-nav') }));
const views={ home:'view-home', glyphs:'view-glyphs', notes:'view-notes', about:'view-about' };
function setActive(id){ document.querySelectorAll('.view').forEach(v=>v.classList.remove('active')); document.getElementById(id)?.classList.add('active') }
function route(){ const h=location.hash||'#/'; const seg=h.replace('#/','').split('/')[0]; switch(seg){ case 'glyphs': setActive(views.glyphs); break; case 'field-notes': case 'notes': setActive(views.notes); break; case 'about': setActive(views.about); break; default: setActive(views.home) } } addEventListener('hashchange',route); route();

// ===== JSON CONTENT LOADER =====
const state = { lore:{fragments:[]}, notes:{logs:[]}, glyphs:{items:[]}, puzzles:{items:[]} };
const CONTENT_PATH='./content';
async function fetchJSON(name, fallback){ try{ const res=await fetch(`${CONTENT_PATH}/${name}.json`,{cache:'no-store'}); if(!res.ok) throw new Error('http '+res.status); return await res.json(); } catch(e){ console.warn('Using fallback for', name, e); return fallback; } }
const FALLBACK_LORE={ fragments:['The carpet is wet. It has always been wet. Your shoes remember.','Behind the hum of the lights there is a second hum counting backwards.','If the wallpaper smiles back, avert your eyes and walk diagonally.','Not all doors are exits. Some are mouths.','Do not give your name to an echo. It will use it to knock.'] };
const FALLBACK_NOTES={ logs:[{id:'31A',text:'You can map the hum by closing one ear.'},{id:'31B',text:'Ceiling tiles 3-1-3 are loose. Eyes above.'},{id:'31C',text:'Walk diagonally when the wallpaper breathes.'}] };
const FALLBACK_GLYPHS={ items:[{title:'GOAT-SIGNAL',src:'assets/sigil_1.webp',caption:'Residual echo burned into film.'},{title:'EYE-WATCHER',src:'assets/sigil_2.webp',caption:'All-seeing diode behind drywall.'},{title:'NEON-PORTAL',src:'assets/sigil_3.webp',caption:'Portal triangulation mark ∆.'},{title:'CODE-SIGIL',src:'assets/sigil_4.webp',caption:'Stitched from forbidden syntax.'},{title:'MIRROR-ROOM',src:'assets/sigil_5.webp',caption:'The room that remembers you.'},{title:'UNKNOWN-ENTITY',src:'assets/sigil_6.webp',caption:'Do not stare more than 33 seconds.'}] };
const FALLBACK_PUZZLES={ items:[
  {id:'p1', type:'base64', prompt:'Z29hdGRvb3I=', answer:'goatdoor', success:'The door remembers you.'},
  {id:'p2', type:'rot13',  prompt:'onpxebbzf',  answer:'backrooms', success:'The vents fall silent.'}
]};
function renderNotes(){ const g=document.getElementById('notes-grid'); g.innerHTML=''; state.notes.logs.forEach(l=>{ const card=document.createElement('article'); card.className='card'; card.innerHTML=`<h3>LOG ${l.id}</h3><p class="line">${l.text}</p>`; g.appendChild(card); }); }
function renderGlyphs(){ const grid=document.getElementById('glyph-grid'); grid.innerHTML=''; state.glyphs.items.forEach(it=>{ const card=document.createElement('article'); card.className='card'; card.innerHTML=`<h3>${it.title}</h3>`+(it.src?`<img class="sigil" loading="lazy" alt="${it.title}" src="${it.src}" style="width:100%;border-radius:8px;opacity:.88;mix-blend-mode:screen;filter:drop-shadow(0 0 16px var(--neon2));margin-bottom:8px">`:'')+(it.caption?`<p class="line">${it.caption}</p>`:''); grid.appendChild(card); }); }
async function initJSON(){ state.lore=await fetchJSON('lore',FALLBACK_LORE); state.notes=await fetchJSON('notes',FALLBACK_NOTES); state.glyphs=await fetchJSON('glyphs',FALLBACK_GLYPHS); state.puzzles=await fetchJSON('puzzles',FALLBACK_PUZZLES); renderNotes(); renderGlyphs(); }
initJSON();

// ===== PUZZLES SYSTEM =====
function showPuzzleList(){ printLine('[PUZZLES]'); state.puzzles.items.forEach(p=>{ printLine(`  ${p.id.toUpperCase()} — ${p.type} hint: ${p.prompt}`); }); printLine('Use SOLVE <id> <answer>'); }
function solvePuzzle(input){ const parts=input.trim().split(/\s+/); if(parts.length<2){ printLine('Usage: SOLVE <id> <answer>'); return; } const id=parts[0].toLowerCase(); const ans=parts.slice(1).join(' ').toLowerCase(); const p=state.puzzles.items.find(x=>x.id===id); if(!p){ printLine('Unknown puzzle id.'); return; } if(ans===p.answer.toLowerCase()){ printLine(p.success||'Unlocked.'); if(id==='p1'){ location.hash='#/glyphs'; } } else { printLine('Incorrect. The note stays silent.'); } }

// ===== COMMAND ROUTER =====
function help(){ printLine('AVAILABLE COMMANDS:'); ['HELP','ACCESS 313','LORE','LINKS','BACKROOMS','PUZZLES','SOLVE <id> <answer>','RELOAD','SHOW LORE','SHOW NOTES','SHOW GLYPHS','CLEAR'].forEach(c=>printLine('  '+c)) }
function backrooms(){ printLine('[FIELD BRIEFING v2.1]'); printLine(' SAFE  — know your limits; calibrate fear'); printLine(' SANE  — reality checks every 10 minutes'); printLine(' CONSENSUAL — do not pull others across without a signal'); printLine(' If lost: follow the hum until it stutters. Then stop.') }
function links(){ printLine('TRUSTED LINKS:'); printLine('  » neon-terminal.wiki  // classified archive') }
function lore(){ state.lore.fragments.forEach(s=>printLine('• '+s)) }
function access(code){ const seed=(code||'').toString().trim(); if(seed==='313'){ printLine('ACCESS 313: triangulating… portal wobble detected.'); location.hash='#/glyphs' } else if(seed){ printLine('ACCESS '+seed+': denied.') } else { printLine('ACCESS: missing code. Example: ACCESS 313') } }
function clearOut(){ output.innerHTML='' }
function onCommand(raw){ const t=(raw||'').trim(); if(!t) return; printLine('user@node:~$ '+t); const [c,...rest]=t.split(/\s+/); const U=c.toUpperCase(); switch(U){
  case 'HELP': help(); break;
  case 'LORE': lore(); break;
  case 'LINKS': links(); break;
  case 'BACKROOMS': backrooms(); break;
  case 'ACCESS': access(rest[0]); break;
  case 'GOTO': location.hash = (rest[0]||'home').toLowerCase()==='glyphs'?'#/glyphs': (rest[0]||'home').toLowerCase()==='notes'?'#/field-notes': (rest[0]||'home').toLowerCase()==='about'?'#/about':'#/'; route(); break;
  case 'CLEAR': clearOut(); break;
  case 'RELOAD': initJSON().then(()=>printLine('JSON loaded.')); break;
  case 'SHOW': { const sub=(rest[0]||'').toUpperCase(); if(sub==='LORE') lore(); else if(sub==='NOTES') renderNotes(); else if(sub==='GLYPHS') renderGlyphs(); else printLine('SHOW what? LORE/NOTES/GLYPHS'); } break;
  case 'PUZZLE':
  case 'PUZZLES': showPuzzleList(); break;
  case 'SOLVE': solvePuzzle(rest.join(' ')); break;
  default: printLine('unknown: '+c+'  (type HELP)');
}}
document.querySelectorAll('a[data-cmd]')?.forEach(a=>a.addEventListener('click', e=>{ e.preventDefault(); onCommand(a.dataset.cmd); }));
</script>
</body>
</html>
